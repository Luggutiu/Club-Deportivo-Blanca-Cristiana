{% extends "base_public.html" %}
{% block title %}Inicio - Club Deportivo Blanca Cristiana{% endblock %}

{% block content %}
<div class="publicaciones-wrapper">
  <h2>üì£ √öltimas Publicaciones</h2>

  {% if publicaciones %}
    {% for item in publicaciones %}
      {% if item.__class__.__name__ == "Post" %}
        <div class="post">
          {% if item.titulo %}
            <h3 style="color:#ffb3c6;">{{ item.titulo }}</h3>
          {% endif %}
          {% if item.texto %}
            <p style="color:white;">{{ item.texto }}</p>
          {% endif %}
          {% if item.imagen_url %}
            <img src="{{ item.imagen_url }}" alt="Imagen" style="max-width:100%; border-radius: 8px;">
          {% elif item.imagen_archivo %}
            <img src="/static/uploads/{{ item.imagen_archivo }}" alt="Imagen subida" style="max-width:100%; border-radius: 8px;">
          {% endif %}
          {% if item.video_embed %}
            <div class="video-embed-container">
              {{ item.video_embed | safe }}
            </div>
          {% elif item.plataforma in ["YouTube", "Facebook", "TikTok", "Instagram"] %}
            <div class="video-embed-container">
              <iframe src="{{ item.embed_url }}" allowfullscreen></iframe>
            </div>
          {% endif %}
          <div style="margin-top:10px;">
            ‚ù§Ô∏è {{ item.likes or 0 }} Me gusta
          </div>
        </div>

      {% elif item.__class__.__name__ == "Horario" %}
        <div class="horario-card">
          <h3>{{ item.dia }}</h3>
          <p><strong>{{ item.hora_inicio }} - {{ item.hora_fin }}</strong></p>
          <p>{{ item.actividad }}</p>
        </div>
      {% endif %}
    {% endfor %}
  {% else %}
    <p style="color:white;">No hay publicaciones todav√≠a.</p>
  {% endif %}
</div>
{% endblock %}

{% block extra_css %}
<style>
  .publicaciones-wrapper {
    padding: 20px;
  }
  .post {
    background-color: rgba(255, 255, 255, 0.05);
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 30px;
  }
  .horario-card {
    background-color: #1c1c1c;
    border: 1px solid #ff5e78;
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 30px;
  }
  img {
    width: 100%;
    border-radius: 8px;
  }
  .video-embed-container {
    position: relative;
    width: 100%;
    padding-top: 56.25%;
    margin-top: 10px;
  }
  .video-embed-container iframe {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    border: none;
  }
</style>
{% endblock %}